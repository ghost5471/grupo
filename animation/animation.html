<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PS4-like Background Animation</title>
  <style>
    /* Variáveis padrão para tema escuro */
    :root {
      --bg-color: #0d1b2a;
      --wave-color: rgba(255, 255, 255, 0.05);
      --particle-color: rgba(255, 255, 255, 0.2);
    }

    /* Cores para tema escuro */
    body.dark {
      --bg-color: #0d1b2a;
      --wave-color: rgba(255, 255, 255, 0.05);
      --particle-color: rgba(255, 255, 255, 0.2);
    }

    /* Cores para tema claro */
    body.light {
      --bg-color: #f0f0f0;
      --wave-color: rgba(0, 0, 0, 0.03);
      --particle-color: rgba(0, 0, 0, 0.15);
    }

    /* Estilização geral da página */
    body {
      margin: 0;
      background-color: var(--bg-color); /* Aplica cor de fundo com base no tema */
      overflow: hidden; /* Remove rolagem */
    }

    /* Deixa o canvas ocupar a tela toda */
    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }

    /* Estilo do botão de alternar tema */
    .toggle {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 10;
      padding: 10px 20px;
      background: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body class="dark">
  <!-- Botão para alternar entre tema claro e escuro -->
  <button class="toggle">Toggle Theme</button>
  <!-- Canvas onde será desenhada a animação -->
  <canvas id="bg"></canvas>

  <script>
    // Seleciona o canvas e define contexto 2D
    const canvas = document.getElementById("bg");
    const ctx = canvas.getContext("2d");

    // Define largura e altura iniciais do canvas
    let width = (canvas.width = window.innerWidth);
    let height = (canvas.height = window.innerHeight);

    const waves = [];      // Armazena os dados das ondas
    const waves1 = [];
    const waves2 = [];
    const particles = [];  // Armazena os dados das partículas

    // Cria 3 ondas com propriedades diferentes
    let i = 0;
      waves.push({
        y: height / 2 + i * 100,        // Posição vertical da onda
        amp: 20 + i * 10,               // Amplitude da onda (altura das curvas)
        freq: 0.01 + i * 0.005,         // Frequência (quantas curvas por pixel)
        speed: 0.02 + i * 0.01,         // Velocidade da animação
        phase: Math.random() * Math.PI * 2, // Fase inicial aleatória
      });

    let  j = 2;
      waves1.push({
        y: height / 2 + j * 100,        // Posição vertical da onda
        amp: 20 + j * 10,               // Amplitude da onda (altura das curvas)
        freq: 0.01 + j * 0.005,         // Frequência (quantas curvas por pixel)
        speed1: 0.1 + j * 0.01,         // Velocidade da animação
        phase: Math.random() * Math.PI * 2, // Fase inicial aleatória
      });

      let  k = 3;
      waves2.push({
        y: height / 2 + k * 100,        // Posição vertical da onda
        amp: 20 + k * 10,               // Amplitude da onda (altura das curvas)
        freq: 0.01 + k * 0.005,         // Frequência (quantas curvas por pixel)
        speed2: 0.05 + k * 0.01,         // Velocidade da animação
        phase: Math.random() * Math.PI * 2, // Fase inicial aleatória
      });
    

    // Cria 1200 partículas com posição, tamanho e velocidade aleatórios
    for (let i = 0; i < 1200; i++) {
      particles.push({
        x: Math.random() * width,             // Posição horizontal
        y: Math.random() * height,            // Posição vertical
        size: Math.random() * 2 + 1,          // Tamanho entre 1 e 3
        speedY: Math.random() * 0.5 + 0.2,    // Velocidade vertical (subindo)
      });
    }

    // Função principal de animação
    function draw() {
      ctx.clearRect(0, 0, width, height); // Limpa o canvas a cada frame

      // Define a cor das ondas com base no tema atual
      ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--wave-color');

      // Desenha cada onda
      waves.forEach((wave) => {
        ctx.beginPath();
        for (let x = 0; x < width; x++) {
          // Calcula a posição Y da onda com base em seno
          let y = wave.y + Math.sin(x * wave.freq + wave.phase) * wave.amp;
          if (x === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        }
        // Fecha a forma para preencher a parte de baixo
        ctx.lineTo(width, height);
        ctx.lineTo(0, height);
        ctx.closePath();
        ctx.fill();

        // Atualiza a fase da onda para criar movimento
        wave.phase += wave.speed;
      });

      waves1.forEach((wave) => {
        ctx.beginPath();
        for ( x = 0; x < width; x++) {
          // Calcula a posição Y da onda com base em seno
           y = wave.y + Math.sin(x * wave.freq + wave.phase) * wave.amp;
          if (x === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        }
        // Fecha a forma para preencher a parte de baixo
        ctx.lineTo(width, height);
        ctx.lineTo(0, height);
        ctx.closePath();
        ctx.fill();

        // Atualiza a fase da onda para criar movimento
        wave.phase += wave.speed1;
      });

      waves2.forEach((wave) => {
        ctx.beginPath();
        for ( x = 0; x < width; x++) {
          // Calcula a posição Y da onda com base em seno
           y = wave.y + Math.sin(x * wave.freq + wave.phase) * wave.amp;
          if (x === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        }
        // Fecha a forma para preencher a parte de baixo
        ctx.lineTo(width, height);
        ctx.lineTo(0, height);
        ctx.closePath();
        ctx.fill();

        // Atualiza a fase da onda para criar movimento
        wave.phase += wave.speed2;
      });

      

      // Define a cor das partículas
      ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--particle-color');

      // Desenha e move cada partícula
      particles.forEach((p) => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2); // Cria círculo
        ctx.fill();

        p.y -= p.speedY; // Move a partícula para cima

        // Se sair da tela, volta para o final com nova posição aleatória
        if (p.y < 0) p.y = height + Math.random() * 100;
      });

      requestAnimationFrame(draw); // Chama a próxima animação
    }

    draw(); // Inicia a animação

    // Atualiza o canvas quando a janela for redimensionada
    window.addEventListener("resize", () => {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    });

    // Alterna entre os temas claro e escuro quando o botão for clicado
    const toggle = document.querySelector(".toggle");
    toggle.addEventListener("click", () => {
      document.body.classList.toggle("light");
      document.body.classList.toggle("dark");
    });
  </script>
</body>
</html>
